#!/bin/bash

if [ $# -lt 1 ]
then
    echo "yt-clipper needs an url as an argument"
    exit 1
fi

st=(-1)
nd=(-1)

while test $# -gt 0 ; do
    case "$1" in
	*)  url=$(youtube-dl -g "$1")	    
	    shift;;
	
	-s) shift
	    st= $1
	    shift;;
	
	-t) shift
	    nd= $1
	    shift;;
    esac    
done

arr=(${url//[ ]/})
video=${arr[0]}
audio=${arr[1]}

echo video $video
echo audio $audio

echo st $st
echo nd $nd

if [ st -gt 0 ] && [ nd -gt 0 ]
then
    ffmpeg -ss st -t nd  -i $video -ss st -t nd -i $audio -map 0:v -map 1:a -c:v copy -c:a copy output.mkv
elif [ st -gt 0 ] && [ nd -lt 0 ]
then    ffmpeg -ss st -i $video -ss st  -i $audio -map 0:v -map 1:a -c:v copy -c:a copy output.mkv
elif [ st -lt 0 ] && [ nd -gt 0 ]
then     ffmpeg -ss 00:00:00.0 -t nd  -i $video -ss 00:00:00.0 -t nd -i $audio -map 0:v -map 1:a -c:v copy -c:a copy output.mkv
else
    ffmpeg -i $video -i $audio -map 0:v -map 1:a -c:v copy -c:a copy output.mkv       
fi




